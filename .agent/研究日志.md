
# 研究背景

*   **核心课题**: 面向开放集识别的增量式加密流量分类技术的研究与实现。
*   **关键挑战**: 
    1.  **开放集识别**: 模型需要有效识别并归类从未见过的新流量类别（即“未知类”）。
    2.  **数据不均衡**: 在真实网络环境中，各类应用的流量数据通常是不均衡的，模型需要在此情况下依然保持稳健的性能。
    3.  **增量识别**: 模型可以适应新增的流量类型，并在少量样本的情况下习得一定的分类准确性 

# 进展
## 日期：2025年10月24日 21:40
### 当前研究进展总结：
现在在基于[Deep-Packet](https://github.com/ZhaoxingZhang/Deep-Packet-Ultar)这个模型的基础上进行改进，以达到提升模型对未知流量的开放集识别能力，并改善其增量识别能力的目标，但是我这段时间做了多种尝试，主要有这些：

   1. 增加注意力机制：在ResNet模型中引入SEBlock注意力机制后，模型表现大幅下降，宏平均F1分数从基准的0.72降低至0.52。
   2. 优化数据与算法：尝试了两种主流方法来解决数据不均衡问题，但效果均不理想：
       * 使用SMOTE技术进行数据增强，导致模型严重过拟合，宏平均F1分数骤降至0.31。
       * 改用Focal Loss损失函数，模型性能完全崩溃，宏平均F1分数仅为0.09。
   3. 尝试混合专家（MoE）架构：这是唯一获得部分成功的尝试。虽然总体准确率从90.8%下降到87.2%，宏平均F1分数从0.72提升到了0.78

这些优化尝试都没有超过基准模型的表现
Deep-Packet作为基准感觉是一个比较简单的模型，但是它在加密流量分析上表现很好，准确率能有96%以上，在开放集识别、增量识别上表现也很好，并且加了好几种间接层都会降低它的表现
这个基准模型的架构是一个基于`ResNet1d`的深度残差网络。其核心是一个包含16个残差块（`BasicBlock`）的1D卷积网络，每个残差块有两层卷积。在残差网络之后，它还连接了三个全连接层，用于最终的分类决策

### 对当前进展的反思
- 数据集是什么样子？：目前用的是ISCX VPN-nonVPN 2016数据集，数据预处理直接用的Deep-Packet提供的方法
- 提取了哪些特征？贡献度如何：
    - 它处理数据的时候没有提取特征，直接把网络包从IP头开始的前1500个字节转化成固定长度为1500的向量了
    - 那可能不行，他们的方法，数据和特征，肯定是他们的比较优。这个策略是不对的，第一步需要先构造专用场景的数据集，不能在他那上面硬做了
    - 把 IP 头和端口混淆之后试下？随机化之后
- 我也做了一些处理，比如我把数据集一个类（Facebook）之外其他类的样本数量都降低到1/10，构建的倾斜数据集上表现还是基准模型更好
    - 这种处理是对的
- 降低到 1/10 之后，每个类是多大规模：
    - 它这个数据集本身类不均衡，大致上top3的类几百万，少数类几千这样
    - 几千还是太多了，现在 few-shot 场景很极端，几十这样
- 这些数据包本身有没有明文字节特征
    - 目前用的数据集有明文特征
    - deep packet 这种流量编码方式非常适合提取明文特征，难怪（基准模型的分类效果那么好）

### 下一步研究计划
- 寻找不带有明文信息的数据集、或者自行编写数据预处理脚本，将数据集中的IP 头和端口作混淆处理
- 在不带有明文信息的数据集上进行训练，获取到Deep-Packet真实的加密流量分类表现
- 验证MoE框架的分类表现，并修改框架使其能更灵活的改变架构和适应分类任务（例如增加专家以实现增量分类）